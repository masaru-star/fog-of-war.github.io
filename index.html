
<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ストラテジーゲーム「戦争の霧」</title>
<style>
  :root{--sea:#00ccff;--land:#ffffff;--ui:#0f172a;--accent:#34d399;--player:#22c55e;--ai1:#ef4444;--ai2:#3b82f6;--ai3:#f97316;--ai4:#8b5cf6;
      /* AI 5-10 の色を追加 */
      --ai5: #d946ef; /* fuchsia */
      --ai6: #db2777; /* pink */
      --ai7: #10b981; /* emerald */
      --ai8: #f59e0b; /* amber */
      --ai9: #6b7280; /* gray */
      --ai10: #14b8a6; /* teal */
  }
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,"Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;background:#071021;color:#e6eef6}
  .wrap{display:flex;gap:12px;padding:12px}
  canvas{background:#000;border-radius:8px;box-shadow:0 8px 30px rgba(0,0,0,.6);cursor:pointer;
        /* キーボードイベント(スクロール)を受け取るために必要 */
        tabindex: 0; 
        outline: none; /* フォーカス時の青枠を消す */
    width: 1125px;
    height: 810px;
    flex-shrink: 0;
  }
  canvas:focus {
      box-shadow: 0 8px 30px rgba(0,0,0,.6), 0 0 0 3px var(--accent); /* フォーカスが当たっていることを示す */
  }
  .sidebar{width:380px;background:linear-gradient(180deg,#071022 0%, #06131b 100%);border-radius:8px;padding:14px;box-shadow:0 8px 30px rgba(0,0,0,.6)}
  h2{margin:6px 0 10px;color:var(--accent)}
  .resources{display:grid;grid-template-columns:1fr 1fr;gap:6px}
  .res{background:#061726;padding:8px;border-radius:6px;font-size:14px}
  .controls{margin-top:10px}
  button,select,input{padding:8px;border-radius:6px;border:0;background:#0b2740;color:#fff;cursor:pointer}
  button.small{padding:6px;font-size:13px}
  button:disabled{opacity:.4;cursor:not-allowed}
  .log{height:120px;overflow:auto;background:#04121a;padding:8px;border-radius:6px;margin-top:8px;font-size:13px}
  .small{font-size:13px;color:#9fb3c8}
  .map-legend{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  .legend-item{display:flex;align-items:center;gap:6px}
  .swatch{width:18px;height:18px;border-radius:4px}
  #countryNameInput, #aiCountSelect, #mapSizeSelect {width:100%;padding:8px;border-radius:6px;border:0;margin-bottom:8px;background:#061726;color:#fff}
  #tileActions {display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap;}
  #splitOverlay {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.6);
    z-index: 100;
    align-items: center;
    justify-content: center;
  }
  #splitForm {
    background: var(--ui);
    padding: 20px;
    border-radius: 8px;
    border: 1px solid var(--accent);
    box-shadow: 0 8px 30px rgba(0,0,0,.6);
    width: 300px;
  }
  #splitForm h3 {
    margin-top: 0;
    color: var(--accent);
  }
  .split-input-group {
    display: grid;
    grid-template-columns: 80px 1fr 60px;
    gap: 8px;
    align-items: center;
    margin-bottom: 6px;
    font-size: 14px;
  }
  .split-input-group input {
    width: 100%;
    padding: 6px;
    background: #061726;
  }
  .split-input-group label {
    color: #9fb3c8;
  }
.scroll-buttons-container {
    margin-top: 15px;
    display: grid;
    grid-template-areas: 
        ". up ." 
        "left center right" 
        ". down .";
    grid-template-columns: 1fr 1fr 1fr;
    gap: 5px;
    width: 150px; /* 全体の幅を調整 */
    margin-left: auto;
    margin-right: auto;
}

.scroll-button {
    padding: 10px 5px;
    border-radius: 6px;
    border: 0;
    background: #0b2740; /* 他のボタンと同じ背景色 */
    color: var(--accent); /* 強調色を使用 */
    cursor: pointer;
    font-size: 16px;
    line-height: 1;
    transition: background 0.1s;
}

.scroll-button:hover {
    background: #1c3d5e;
}

#scrollUp { grid-area: up; }
#scrollLeft { grid-area: left; }
#scrollRight { grid-area: right; }
#scrollDown { grid-area: down; }
</style>
</head>
<body>

<div id="splitOverlay">
  <div id="splitForm">
    <h3>軍団の分割</h3>
    <p class="small">新しい軍団として分割するユニット数を指定してください。隣接する空きタイルに配置されます。</p>
    
    <div id="splitInputs">
      </div>

    <div style="margin-top: 15px; display: flex; gap: 8px; justify-content: flex-end;">
      <button id="splitCancelBtn" class="small" style="background: #555;">キャンセル</button>
      <button id="splitConfirmBtn" class="small" style="background: var(--accent); color: #000;">決定</button>
    </div>
  </div>
</div>

<div class="wrap">
  <canvas id="map" width="1000" height="720"></canvas>
  <div class="sidebar">
    <div id="setupUI">
      <input type="text" id="countryNameInput" placeholder="あなたの国名 (例: アルカディア王国)">
      <div style="margin-bottom:8px">
          <label for="aiCountSelect" class="small">AI国家数 (1〜10)</label>
          <select id="aiCountSelect">
              <option value="1">1</option>
              <option value="2" selected>2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
          </select>
      </div>
      <div style="margin-bottom:8px">
          <label for="mapSizeSelect" class="small">マップサイズ</label>
          <select id="mapSizeSelect">
              <option value="64x32" selected>64 x 32 (標準)</option>
              <option value="30x20">30 x 20 (小)</option>
              <option value="80x50">80 x 50 (大)</option>
          </select>
      </div>
      <button id="startBtn">ゲーム開始</button>
<div style="display: flex; gap: 8px; margin-top: 8px;">
  <button id="loadBtn" disabled>ロード</button>
  <button id="resetBtn" style="background:#4a0e0e;">セーブデータ削除</button>
</div>
    </div>

    <div id="gameUI" style="display:none">
      <div class="small" id="countryLabel"></div>
      <div class="small">ターン制ソロプレイ — プレイヤー vs AI×<span id="aiCountDisplay">2</span></div>
      <h3 class="small" style="margin-top:12px">資源</h3>
      <div class="resources" id="resources"></div>
      <div class="controls">
        
        <div id="productionControls" style="display:none; margin-bottom:8px;">
            <div style="display:flex;gap:6px;align-items:center">
                <select id="produceType">
                    <option value="inf">歩兵(食料)</option>
                    <option value="arty">砲兵(鉄鋼)</option>
                    <option value="tank">戦車(石油)</option>
                    <option value="sub">潜水艦(石油+鉄鋼)</option>
                    <option value="bb">戦艦(石油)</option>
                </select>
                <button id="produceBtn">生産を実行</button>
            </div>
        </div>

        <button id="endTurn">ターン終了</button><button id="saveBtn" style="margin-left: 8px; background: #1e40af;">セーブ</button>
<div style="margin-top:15px;">
    <div class="small" style="text-align:center; margin-bottom: 5px; color: var(--accent);">マップ操作</div>
    <div class="scroll-buttons-container">
      <button id="scrollUp" class="scroll-button">▲</button>
      <button id="scrollHome" class="scroll-button">◎</button> 
      <button id="scrollLeft" class="scroll-button">◀</button>
      <button id="scrollRight" class="scroll-button">▶</button>
      <button id="scrollDown" class="scroll-button">▼</button>
    </div>
  </div>
        <div style="margin-top:8px">
          <div class="small">選択タイル: <span id="selInfo">なし</span></div>
          <div class="small">選択ユニット: <span id="selUnit">なし</span></div>
          
          <div id="tileActions" style="display:none;">
            <button id="actionMoveBtn" class="small">移動モード</button>
            <button id="actionProduceBtn" class="small">生産モード</button>
            <button id="actionSplitBtn" class="small" style="background:#f97316;">分割</button>
            <button id="actionCancelBtn" class="small" style="background:#555; display:none;">キャンセル</button>
          </div>
        </div>

      </div>

      <div style="margin-top:10px">
        <div class="map-legend" id="legend">
          <div class="legend-item"><div class="swatch" style="background:var(--sea);"></div><div class="small">海</div></div>
          <div class="legend-item"><div class="swatch" style="background:var(--land);border:1px solid #ddd"></div><div class="small">陸</div></div>
          <div class="legend-item"><div class="swatch" style="background:#ffd27f;border-radius:50%"></div><div class="small">資源ポイント</div></div>
          <div class="legend-item"><div class="swatch" style="background:#facc15;border-radius:4px"></div><div class="small">選択タイル</div></div>
          <div class="legend-item"><div class="swatch" style="background:rgba(59,130,246,0.8);border-radius:3px"></div><div class="small">海上建設可能マス</div></div>
        </div>
        <div id="playerLegends" class="map-legend">
            </div>
      </div>

      <div class="log" id="log"></div>
    </div>
    
    <div id="gameOverUI" style="display:none; text-align:center; padding:20px; background:#4a0e0e; border-radius:6px; margin-top:10px; border: 2px solid #ef4444;">
        <h3>ゲームオーバー</h3>
        <p id="gameOverMessage" style="font-size:16px; margin-top:10px;"></p>
        <button onclick="window.location.reload()" style="margin-top:15px; background:#ef4444; padding:10px 20px;">再スタート</button>
    </div>
    
  </div>
</div>

<script src="main.js"></script>
</body>
</html>
