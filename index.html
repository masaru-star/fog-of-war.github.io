
<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ストラテジーゲーム「戦争の霧」</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="splitOverlay">
  <div id="splitForm">
    <h3>軍団の分割</h3>
    <p class="small">新しい軍団として分割するユニット数を指定してください。隣接する空きタイルに配置されます。</p>
    
    <div id="splitInputs">
      </div>

    <div style="margin-top: 15px; display: flex; gap: 8px; justify-content: flex-end;">
      <button id="splitCancelBtn" class="small" style="background: #555;">キャンセル</button>
      <button id="splitConfirmBtn" class="small" style="background: var(--accent); color: #000;">決定</button>
    </div>
  </div>
</div>

<div class="wrap">
  <canvas id="map" width="1000" height="720"></canvas>
  <div class="sidebar">
    <div id="setupUI">
      <input type="text" id="countryNameInput" placeholder="あなたの国名 (例: アルカディア王国)">
      <div style="margin-bottom:8px">
          <label for="aiCountSelect" class="small">AI国家数 (1〜10)</label>
          <select id="aiCountSelect">
              <option value="1">1</option>
              <option value="2" selected>2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
          </select>
      </div>
      <div style="margin-bottom:8px">
          <label for="mapSizeSelect" class="small">マップサイズ</label>
          <select id="mapSizeSelect">
              <option value="64x32" selected>64 x 32 (標準)</option>
              <option value="30x20">30 x 20 (小)</option>
              <option value="80x50">80 x 50 (大)</option>
          </select>
      </div>
      <button id="startBtn">ゲーム開始</button>
<div style="display: flex; gap: 8px; margin-top: 8px;">
  <button id="loadBtn" disabled>ロード</button>
  <button id="resetBtn" style="background:#4a0e0e;">セーブデータ削除</button>
</div>
    </div>

    <div id="gameUI" style="display:none">
      <div class="small" id="countryLabel"></div>
      <div class="small">ターン制ソロプレイ — プレイヤー vs AI×<span id="aiCountDisplay">2</span></div>
      <h3 class="small" style="margin-top:12px">資源</h3>
      <div class="resources" id="resources"></div>
      <div class="controls">
        
        <div id="productionControls" style="display:none; margin-bottom:8px;">
            <div style="display:flex;gap:6px;align-items:center">
                <select id="produceType">
                    <option value="inf">歩兵(食料)</option>
                    <option value="arty">砲兵(鉄鋼)</option>
                    <option value="tank">戦車(石油)</option>
                    <option value="sub">潜水艦(石油+鉄鋼)</option>
                    <option value="bb">戦艦(石油)</option>
                </select>
                <button id="produceBtn">生産を実行</button>
            </div>
        </div>

        <button id="endTurn">ターン終了</button><button id="saveBtn" style="margin-left: 8px; background: #1e40af;">セーブ</button>
<div style="margin-top:15px;">
    <div class="small" style="text-align:center; margin-bottom: 5px; color: var(--accent);">マップ操作</div>
    <div class="scroll-buttons-container">
      <button id="scrollUp" class="scroll-button">▲</button>
      <button id="scrollHome" class="scroll-button">◎</button> 
      <button id="scrollLeft" class="scroll-button">◀</button>
      <button id="scrollRight" class="scroll-button">▶</button>
      <button id="scrollDown" class="scroll-button">▼</button>
    </div>
  </div>
        <div style="margin-top:8px">
          <div class="small">選択タイル: <span id="selInfo">なし</span></div>
          <div class="small">選択ユニット: <span id="selUnit">なし</span></div>
          
          <div id="tileActions" style="display:none;">
            <button id="actionMoveBtn" class="small">移動モード</button>
            <button id="actionProduceBtn" class="small">生産モード</button>
            <button id="actionSplitBtn" class="small" style="background:#f97316;">分割</button>
            <button id="actionCancelBtn" class="small" style="background:#555; display:none;">キャンセル</button>
          </div>
        </div>

      </div>

      <div style="margin-top:10px">
        <div class="map-legend" id="legend">
          <div class="legend-item"><div class="swatch" style="background:var(--sea);"></div><div class="small">海</div></div>
          <div class="legend-item"><div class="swatch" style="background:var(--land);border:1px solid #ddd"></div><div class="small">陸</div></div>
          <div class="legend-item"><div class="swatch" style="background:#ffd27f;border-radius:50%"></div><div class="small">資源ポイント</div></div>
          <div class="legend-item"><div class="swatch" style="background:#facc15;border-radius:4px"></div><div class="small">選択タイル</div></div>
          <div class="legend-item"><div class="swatch" style="background:rgba(59,130,246,0.8);border-radius:3px"></div><div class="small">海上建設可能マス</div></div>
        </div>
        <div id="playerLegends" class="map-legend">
            </div>
      </div>

      <div class="log" id="log"></div>
    </div>
    
    <div id="gameOverUI" style="display:none; text-align:center; padding:20px; background:#4a0e0e; border-radius:6px; margin-top:10px; border: 2px solid #ef4444;">
        <h3>ゲームオーバー</h3>
        <p id="gameOverMessage" style="font-size:16px; margin-top:10px;"></p>
        <button onclick="window.location.reload()" style="margin-top:15px; background:#ef4444; padding:10px 20px;">再スタート</button>
    </div>
    
  </div>
</div>

<script src="main.js"></script>
</body>
</html>
